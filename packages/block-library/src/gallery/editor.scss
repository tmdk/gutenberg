figure.wp-block-gallery {
	// Override the default list style type _only in the editor_
	// to avoid :not() selector specificity issues.
	// See https://github.com/WordPress/gutenberg/pull/10358

	display: block;
	margin: 0;

	.components-drop-zone {
		display: none;
		pointer-events: none;
	}
	> .blocks-gallery-caption {
		flex: 0 0 100%;
	}

	.components-form-file-upload {
		flex-basis: 100%;
	}
	// @todo: this deserves a refactor, by being moved to the toolbar.
	.block-editor-media-placeholder.is-appender {
		.components-placeholder__label {
			display: none;
		}
		.block-editor-media-placeholder__button {
			margin-bottom: 0;
		}
	}
	.block-editor-media-placeholder {
		margin: 0;
		height: 100%;

		.components-placeholder__label {
			display: flex;
		}
		figcaption {
			z-index: 2;
		}
	}

	figure.wp-block-image {
		// Hide the focus outline that otherwise briefly appears when selecting a block.
		&:not(.is-selected):focus,
		img:focus {
			outline: none;
		}

		&.is-selected {
			box-shadow:
				0 0 0 $border-width $white,
				0 0 0 3px var(--wp-admin-theme-color);
			border-radius: $radius-block-ui;
			outline: 2px solid transparent;

			&::before {
				box-shadow: 0 0 0 $border-width $white inset, 0 0 0 3px var(--wp-admin-theme-color) inset;
				content: "";
				// Shown in Windows 10 high contrast mode.
				outline: 2px solid transparent;
				position: absolute;
				top: 0;
				right: 0;
				bottom: 0;
				left: 0;
				z-index: 1;
			}
		}

		&.is-transient img {
			opacity: 0.3;
		}

		&.is-selected .block-library-gallery-item__inline-menu {
			display: inline-flex;
		}
	}
}


/**
 * Gallery inspector controls settings.
 */
.gallery-settings-buttons {
	.components-button:first-child {
		margin-right: 8px;
	}
}

.gallery-image-sizes {
	.components-base-control__label {
		display: block;
		margin-bottom: 4px;
	}

	.gallery-image-sizes__loading {
		display: flex;
		align-items: center;
		color: $gray-700;
		font-size: $helptext-font-size;
	}

	.components-spinner {
		margin: 0 8px 0 4px;
	}
}
